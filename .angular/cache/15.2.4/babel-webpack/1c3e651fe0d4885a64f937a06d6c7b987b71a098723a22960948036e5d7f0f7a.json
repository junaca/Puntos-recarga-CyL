{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/mapData.service\";\nimport * as i2 from \"../../services/map.service\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = [\"elementLi\"];\nfunction SearchBarResultsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"h6\");\n    i0.ɵɵtext(2, \"Cargando\");\n    i0.ɵɵelementEnd()();\n  }\n}\nconst _c1 = function () {\n  return {\n    \"font-color\": \"yellow\"\n  };\n};\nfunction SearchBarResultsComponent_ul_1_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 5);\n    i0.ɵɵlistener(\"click\", function SearchBarResultsComponent_ul_1_li_1_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const punto_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.flyTo(punto_r3));\n    });\n    i0.ɵɵelementStart(1, \"div\", 6)(2, \"div\", 7)(3, \"h5\", 8);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"i\", 9);\n    i0.ɵɵelementStart(6, \"span\", 10);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 11)(9, \"h6\", 8);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function SearchBarResultsComponent_ul_1_li_1_Template_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const punto_r3 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.getDirections(punto_r3));\n    });\n    i0.ɵɵtext(12, \" Ruta \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"div\", 13)(14, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function SearchBarResultsComponent_ul_1_li_1_Template_button_click_14_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.changeFavourite());\n    });\n    i0.ɵɵelement(15, \"i\", 15);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const punto_r3 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"active\", punto_r3.fields.dd.join(\",\") === ctx_r2.selectedId);\n    i0.ɵɵpropertyInterpolate(\"id\", punto_r3.fields.dd.join(\",\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", punto_r3.fields.nombre, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Tipo: \", punto_r3.fields.tipo, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" N\\u00BA conectores: \", punto_r3.fields.no, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", punto_r3.recordid);\n    i0.ɵɵadvance(4);\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(10, _c1));\n    i0.ɵɵproperty(\"ngClass\", ctx_r2.isFavourite ? \"pi-star-fill\" : \"pi-star\");\n  }\n}\nfunction SearchBarResultsComponent_ul_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 3);\n    i0.ɵɵtemplate(1, SearchBarResultsComponent_ul_1_li_1_Template, 16, 11, \"li\", 4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.puntos);\n  }\n}\nexport let SearchBarResultsComponent = /*#__PURE__*/(() => {\n  class SearchBarResultsComponent {\n    get isLoadingPuntos() {\n      return this.mapDataService.isLoadingPuntos;\n    }\n    get puntos() {\n      return this.mapDataService.puntos;\n    }\n    constructor(mapDataService, mapService) {\n      this.mapDataService = mapDataService;\n      this.mapService = mapService;\n      this.selectedId = \"\";\n      this.isFavourite = false;\n    }\n    ngOnInit() {\n      this.mapService.popupInfo.subscribe(data => {\n        const coord = `${data.lat},${data.lng}`;\n        this.selectedId = coord;\n        //console.log(`${data.lat},${data.lng}`)\n        this.scrollToListItem(coord);\n        //this.mapService.selectMarker( data );\n      });\n\n      this.puntosFavoritos = this.mapDataService.puntosFavoritos;\n      console.log(this.puntosFavoritos);\n    }\n    flyTo(punto) {\n      const coord = punto.fields.dd.join(\",\");\n      this.selectedId = coord; //TODO: cambiar por el pipe lnglat\n      this.mapService.flyTo([punto.fields.dd[1], punto.fields.dd[0]]);\n    }\n    scrollToListItem(selectedId) {\n      setTimeout(() => {\n        const element = document.getElementById(selectedId);\n        if (element) {\n          element.scrollIntoView({\n            behavior: 'smooth'\n          });\n        }\n      }, 0);\n    }\n    getDirections(punto) {\n      if (!this.mapDataService.userLocation) throw Error(\"No se encontró la posición de inicio\");\n      this.mapService.getRouteBetweenPoints(this.mapDataService.userLocation, [punto.fields.dd[1], punto.fields.dd[0]]);\n    }\n    changeFavourite() {\n      this.isFavourite = !this.isFavourite;\n    }\n  }\n  SearchBarResultsComponent.ɵfac = function SearchBarResultsComponent_Factory(t) {\n    return new (t || SearchBarResultsComponent)(i0.ɵɵdirectiveInject(i1.MapDataService), i0.ɵɵdirectiveInject(i2.MapService));\n  };\n  SearchBarResultsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SearchBarResultsComponent,\n    selectors: [[\"app-search-bar-results\"]],\n    viewQuery: function SearchBarResultsComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.elementLi = _t.first);\n      }\n    },\n    decls: 2,\n    vars: 2,\n    consts: [[\"class\", \"alert alert-primary mt-2 text-center\", 4, \"ngIf\"], [\"class\", \"list-group mt-2\", 4, \"ngIf\"], [1, \"alert\", \"alert-primary\", \"mt-2\", \"text-center\"], [1, \"list-group\", \"mt-2\"], [\"class\", \"list-group-item list-group-item-action\", \"filterPlaceholder\", \"Filter by name\", 3, \"active\", \"id\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"filterPlaceholder\", \"Filter by name\", 1, \"list-group-item\", \"list-group-item-action\", 3, \"id\", \"click\"], [1, \"flex\", \"align-items-center\", \"p-2\", \"w-full\", \"flex-wrap\", \"col-11\"], [1, \"flex-1\"], [1, \"mb-2\"], [1, \"pi\", \"pi-bolt\", \"vertical-align-middle\", \"mr-2\", 2, \"font-size\", \"1.5rem\"], [1, \"vertical-align-middle\", \"line-height-1\"], [1, \"flex\", \"flex-column\", \"align-items-end\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"value\", \"click\"], [1, \"col-1\"], [1, \"p-button\", \"p-button-text\", 3, \"click\"], [1, \"pi\", 3, \"ngClass\"]],\n    template: function SearchBarResultsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, SearchBarResultsComponent_div_0_Template, 3, 0, \"div\", 0);\n        i0.ɵɵtemplate(1, SearchBarResultsComponent_ul_1_Template, 2, 1, \"ul\", 1);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoadingPuntos);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.puntos);\n      }\n    },\n    dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf],\n    styles: [\"ul[_ngcontent-%COMP%]{padding:0}li[_ngcontent-%COMP%]{display:flex;flex-direction:row}button[_ngcontent-%COMP%]:focus{outline:none}button[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{color:#90ee90}\"]\n  });\n  return SearchBarResultsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}