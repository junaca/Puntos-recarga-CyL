{"ast":null,"code":"import { switchMap, tap } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/mapData.service\";\nimport * as i2 from \"../../services/map.service\";\nimport * as i3 from \"src/app/auth/services/auth.service\";\nimport * as i4 from \"../../components/header/header.component\";\nimport * as i5 from \"../../components/menu/menu.component\";\nimport * as i6 from \"../../components/location-button/location-button.component\";\nexport let MapaComponent = /*#__PURE__*/(() => {\n  class MapaComponent {\n    get usuario() {\n      return this._usuario;\n    }\n    get isMapaReady() {\n      return !!this.mapa;\n    }\n    constructor(mapDataService, mapService, authService) {\n      this.mapDataService = mapDataService;\n      this.mapService = mapService;\n      this.authService = authService;\n      this.puntos = [];\n    }\n    ngAfterViewInit() {\n      this.mapService.mapa$.pipe(switchMap(() => {\n        return this.mapDataService.getPuntos();\n      }), tap()).subscribe(puntos => {\n        this.puntos = puntos.records;\n        const userLocation = this.mapDataService.userLocation;\n        this.mapService.generarMarkers(this.puntos, userLocation);\n        this.mapService.mapa?.setCenter(userLocation || this.mapService.mapa.getCenter());\n      });\n    }\n  }\n  MapaComponent.ɵfac = function MapaComponent_Factory(t) {\n    return new (t || MapaComponent)(i0.ɵɵdirectiveInject(i1.MapDataService), i0.ɵɵdirectiveInject(i2.MapService), i0.ɵɵdirectiveInject(i3.AuthService));\n  };\n  MapaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MapaComponent,\n    selectors: [[\"app-mapa\"]],\n    decls: 4,\n    vars: 0,\n    consts: [[\"id\", \"mapaElement\", 1, \"mapa-container\"]],\n    template: function MapaComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-header\")(1, \"app-location-button\")(2, \"div\", 0)(3, \"app-menu\");\n      }\n    },\n    dependencies: [i4.HeaderComponent, i5.MenuComponent, i6.LocationButtonComponent],\n    styles: [\".mapa-container[_ngcontent-%COMP%]{width:100%;height:100%}\"]\n  });\n  return MapaComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}