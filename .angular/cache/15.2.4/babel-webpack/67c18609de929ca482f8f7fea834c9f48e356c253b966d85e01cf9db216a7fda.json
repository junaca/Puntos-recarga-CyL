{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/mapData.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../search-bar-results/search-bar-results.component\";\nconst _c0 = [\"query\"];\nconst _c1 = [\"selectFiltro\"];\nfunction SearchBarComponent_option_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 8);\n    i0.ɵɵtext(1, \" favoritos \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SearchBarComponent_option_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const filtro_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", filtro_r5.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(filtro_r5.name);\n  }\n}\nexport let SearchBarComponent = /*#__PURE__*/(() => {\n  class SearchBarComponent {\n    constructor(mapDataService) {\n      this.mapDataService = mapDataService;\n      this.hasFavPoints = false;\n      this.filtros = [{\n        name: \"nombre\",\n        value: \"nombre\"\n      }, {\n        name: \"tipo\",\n        value: \"type\"\n      }, {\n        name: \"operador\",\n        value: \"operador\"\n      }];\n    }\n    ngOnInit() {\n      this.hasFavPoints = this.mapDataService.usuario?.recordid ? true : false;\n    }\n    onQueryChanged() {\n      if (this.debounceTimer) clearTimeout(this.debounceTimer);\n      const query = this.query.nativeElement.value.trim();\n      this.debounceTimer = setTimeout(() => {\n        const filtro = this.selectFiltro.nativeElement.value;\n        if (filtro === \"favoritos\") {\n          this.mapDataService.getFavPoints();\n        } else {\n          this.mapDataService.getPuntosBy(query, filtro);\n        }\n      }, 500);\n    }\n  }\n  SearchBarComponent.ɵfac = function SearchBarComponent_Factory(t) {\n    return new (t || SearchBarComponent)(i0.ɵɵdirectiveInject(i1.MapDataService));\n  };\n  SearchBarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SearchBarComponent,\n    selectors: [[\"app-search-bar\"]],\n    viewQuery: function SearchBarComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.query = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.selectFiltro = _t.first);\n      }\n    },\n    decls: 10,\n    vars: 2,\n    consts: [[1, \"row\"], [\"type\", \"text\", \"placeholder\", \"Buscar lugar\", \"value\", \"GMS DE GUIJUELO SL\", 1, \"form-control\", 3, \"keyup\"], [\"txtQuery\", \"\", \"query\", \"\"], [1, \"form-select\", 3, \"change\"], [\"selectFiltro\", \"\"], [\"value\", \"\"], [\"value\", \"favoritos\", 4, \"ngIf\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"value\", \"favoritos\"], [3, \"value\"]],\n    template: function SearchBarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"input\", 1, 2);\n        i0.ɵɵlistener(\"keyup\", function SearchBarComponent_Template_input_keyup_1_listener() {\n          return ctx.onQueryChanged();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"select\", 3, 4);\n        i0.ɵɵlistener(\"change\", function SearchBarComponent_Template_select_change_4_listener() {\n          return ctx.onQueryChanged();\n        });\n        i0.ɵɵelement(6, \"option\", 5);\n        i0.ɵɵtemplate(7, SearchBarComponent_option_7_Template, 2, 0, \"option\", 6);\n        i0.ɵɵtemplate(8, SearchBarComponent_option_8_Template, 2, 2, \"option\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(9, \"app-search-bar-results\");\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngIf\", ctx.hasFavPoints);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.filtros);\n      }\n    },\n    dependencies: [i2.NgForOf, i2.NgIf, i3.SearchBarResultsComponent],\n    styles: [\"input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{position:sticky;top:0;z-index:100}input[_ngcontent-%COMP%]{width:200px}select[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}\"]\n  });\n  return SearchBarComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}